---
import { Icon } from "astro-icon/components";
---

<form
  id="searchForm"
  role="search"
  autocomplete="off"
  class="flex bg-white rounded-xl"
>
  <input
    id="inputSearch"
    type="text"
    placeholder="Search"
    class="w-full placeholder:text-gray-400 placeholder:font-semibold focus:outline-none px-4"
  />
  <button
    id="btnSearch"
    class="p-3 m-1 cursor-pointer rounded-xl hover:bg-gray-300"
    type="submit"
  >
    <Icon class="h-6 w-6" name="search" color="#045E66" />
  </button>
</form>

<script>
  const form = document.querySelector<HTMLFormElement>("#searchForm");
  const inputSearch = document.querySelector<HTMLInputElement>("#inputSearch");

  form?.addEventListener("submit", (e) => {
    e.preventDefault();

    const searchQuery = inputSearch?.value.trim();
    if (!searchQuery) return;

    const currentPath = window.location.pathname;
    let searchPath = "/search/";

    if (currentPath.startsWith("/videos")) {
      searchPath = "/videos/search/";
    } else {
      searchPath = "/search/";
    }

    window.location.href = `${searchPath}${encodeURIComponent(searchQuery)}`;
  });
</script>
